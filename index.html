<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vehicle Visual Check</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="style.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>

<body>
<div class="container">

<h2>Vehicle Visual Check</h2>

<label>Registration
  <input id="reg" maxlength="8" style="text-transform:uppercase">
</label>

<label>MOT Expiry Date
  <input type="date" id="mot">
</label>

<h3>Windscreen & Wipers</h3>
<label>Windscreen
  <select id="windscreen">
    <option value="W">No issues seen</option>
    <option value="I">Chip / crack observed</option>
  </select>
</label>

<label>Wipers
  <select id="wipers">
    <option value="W">Working</option>
    <option value="I">Worn / damaged</option>
  </select>
</label>

<h3>Tyre Tread Depth (mm)</h3>

<div class="grid">
  <label>Driver Front
    <input type="number" step="0.1" id="td_df">
  </label>
  <label>Driver Rear
    <input type="number" step="0.1" id="td_dr">
  </label>
  <label>Passenger Front
    <input type="number" step="0.1" id="td_pf">
  </label>
  <label>Passenger Rear
    <input type="number" step="0.1" id="td_pr">
  </label>
</div>

<h3>Lights – Driver Side</h3>
<div class="grid">
  <label>Front Light <select id="d_fl"><option value="W">Working</option><option value="I">Issue</option></select></label>
  <label>Rear Light <select id="d_rl"><option value="W">Working</option><option value="I">Issue</option></select></label>
  <label>Brake Light <select id="d_br"><option value="W">Working</option><option value="I">Issue</option></select></label>
  <label>Front Indicator <select id="d_if"><option value="W">Working</option><option value="I">Issue</option></select></label>
  <label>Rear Indicator <select id="d_ir"><option value="W">Working</option><option value="I">Issue</option></select></label>
  <label>Side Repeater <select id="d_is"><option value="W">Working</option><option value="I">Issue</option></select></label>
</div>

<h3>Lights – Passenger Side</h3>
<div class="grid">
  <label>Front Light <select id="p_fl"><option value="W">Working</option><option value="I">Issue</option></select></label>
  <label>Rear Light <select id="p_rl"><option value="W">Working</option><option value="I">Issue</option></select></label>
  <label>Brake Light <select id="p_br"><option value="W">Working</option><option value="I">Issue</option></select></label>
  <label>Front Indicator <select id="p_if"><option value="W">Working</option><option value="I">Issue</option></select></label>
  <label>Rear Indicator <select id="p_ir"><option value="W">Working</option><option value="I">Issue</option></select></label>
  <label>Side Repeater <select id="p_is"><option value="W">Working</option><option value="I">Issue</option></select></label>
</div>

<button onclick="generate()">Generate QR Code</button>

<div id="qrcode"></div>

<small>
Visual check only. Not an MOT or safety guarantee.
</small>

</div>

<script>
function generate() {
  reg.value = reg.value.toUpperCase();

  const data = {
    r: reg.value,
    m: mot.value,
    w: windscreen.value,
    wp: wipers.value,
    t: {
      df: parseFloat(td_df.value) || null,
      dr: parseFloat(td_dr.value) || null,
      pf: parseFloat(td_pf.value) || null,
      pr: parseFloat(td_pr.value) || null
    },
    l: {
      d: { fl:d_fl.value, rl:d_rl.value, br:d_br.value, if:d_if.value, ir:d_ir.value, is:d_is.value },
      p: { fl:p_fl.value, rl:p_rl.value, br:p_br.value, if:p_if.value, ir:p_ir.value, is:p_is.value }
    }
  };

  const encoded = encodeURIComponent(JSON.stringify(data));
  const url = "https://ivanmjwarburton.github.io/Car.Check/report.html?d=" + encoded;

  const qr = document.getElementById("qrcode");
  qr.innerHTML = "";

  new QRCode(qr, {
    text: url,
    width: 180,
    height: 180,
    correctLevel: QRCode.CorrectLevel.M
  });
}
</script>

</body>
</html>
