<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vehicle Check Report</title>
<style>
body { font-family: Arial; max-width: 700px; margin: auto; padding: 16px; }
.bad { color: red; }
.warn { color: orange; }
.good { color: green; }
</style>
</head>
<body>

<h1>Vehicle Check Report</h1>
<div id="report"></div>

<script>
const params = new URLSearchParams(window.location.search);
const data = JSON.parse(decodeURIComponent(params.get("data")));

function badge(text) {
  if (text.includes("Illegal")) return `<span class="bad">${text}</span>`;
  if (text.includes("Low") || text.includes("Issue")) return `<span class="warn">${text}</span>`;
  return `<span class="good">${text}</span>`;
}

document.getElementById("report").innerHTML = `
<p><strong>Registration:</strong> ${data.reg}</p>

<p><strong>Windscreen:</strong> ${data.windscreen}</p>
<p><strong>Wipers:</strong> ${data.wipers}</p>

<h3>Driver Side</h3>
<p>Front light: ${badge(data.lights.driver.front)}</p>
<p>Rear light: ${badge(data.lights.driver.rear)}</p>
<p>Brake light: ${badge(data.lights.driver.brake)}</p>
<p>Indicators:</p>
<ul>
  <li>Front: ${badge(data.lights.driver.indicators.front)}</li>
  <li>Rear: ${badge(data.lights.driver.indicators.rear)}</li>
  <li>Side: ${badge(data.lights.driver.indicators.side)}</li>
</ul>

<h3>Passenger Side</h3>
<p>Front light: ${badge(data.lights.passenger.front)}</p>
<p>Rear light: ${badge(data.lights.passenger.rear)}</p>
<p>Brake light: ${badge(data.lights.passenger.brake)}</p>
<p>Indicators:</p>
<ul>
  <li>Front: ${badge(data.lights.passenger.indicators.front)}</li>
  <li>Rear: ${badge(data.lights.passenger.indicators.rear)}</li>
  <li>Side: ${badge(data.lights.passenger.indicators.side)}</li>
</ul>

<h3>Tyres</h3>
<p>Driver front: ${badge(data.tread.driver.front)}</p>
<p>Driver rear: ${badge(data.tread.driver.rear)}</p>
<p>Passenger front: ${badge(data.tread.passenger.front)}</p>
<p>Passenger rear: ${badge(data.tread.passenger.rear)}</p>

<p><strong>Notes:</strong> ${data.notes || "None"}</p>
<hr>
<p><em>${data.advisory}</em></p>
`;
</script>

</body>
</html>
