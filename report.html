<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vehicle Check Report</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="style.css">
</head>

<body>
<div class="container">

<h2>Vehicle Check Report</h2>
<div id="report"></div>

<small>Visual check only. Not an MOT or safety guarantee.</small>

</div>

<script>
const params = new URLSearchParams(window.location.search);
const raw = params.get("d");

if (!raw) {
  document.getElementById("report").innerHTML = "<p>No report data.</p>";
} else {
  const d = JSON.parse(decodeURIComponent(raw));

  const map = v => v === "W"
    ? '<span class="badge good">Working</span>'
    : '<span class="badge warn">Issue</span>';

  function tyre(mm) {
    if (mm === null) return "Not checked";
    if (mm < 1.6) return `<span class="badge bad">${mm} mm – Illegal</span>`;
    if (mm < 3) return `<span class="badge warn">${mm} mm – Low</span>`;
    return `<span class="badge good">${mm} mm – Good</span>`;
  }

  document.getElementById("report").innerHTML = `
    <p><strong>Registration:</strong> ${d.r}</p>

    <p><strong>Windscreen:</strong> ${map(d.w)}</p>
    <p><strong>Wipers:</strong> ${map(d.wp)}</p>

    <h3>Tyres</h3>
    <ul>
      <li>Driver Front: ${tyre(d.t.df)}</li>
      <li>Driver Rear: ${tyre(d.t.dr)}</li>
      <li>Passenger Front: ${tyre(d.t.pf)}</li>
      <li>Passenger Rear: ${tyre(d.t.pr)}</li>
    </ul>

    <h3>Lights – Driver Side</h3>
    <ul>
      <li>Front light ${map(d.l.d.fl)}</li>
      <li>Rear light ${map(d.l.d.rl)}</li>
      <li>Brake light ${map(d.l.d.br)}</li>
      <li>Front indicator ${map(d.l.d.if)}</li>
      <li>Rear indicator ${map(d.l.d.ir)}</li>
      <li>Side repeater ${map(d.l.d.is)}</li>
    </ul>

    <h3>Lights – Passenger Side</h3>
    <ul>
      <li>Front light ${map(d.l.p.fl)}</li>
      <li>Rear light ${map(d.l.p.rl)}</li>
      <li>Brake light ${map(d.l.p.br)}</li>
      <li>Front indicator ${map(d.l.p.if)}</li>
      <li>Rear indicator ${map(d.l.p.ir)}</li>
      <li>Side repeater ${map(d.l.p.is)}</li>
    </ul>
  `;
}
</script>

</body>
</html>
