<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vehicle Check Report</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="style.css">
</head>

<body>
<div class="container">

<h2>Vehicle Check Report</h2>
<div id="report"></div>

<small>Visual check only. Not an MOT or safety guarantee.</small>

</div>

<script>
const raw = new URLSearchParams(location.search).get("d");

if (!raw) {
  document.getElementById("report").innerHTML = "<p>No report data.</p>";
} else {
  const d = JSON.parse(decodeURIComponent(raw));

  const badge = v =>
    v === "W"
      ? '<span class="good">Working</span>'
      : '<span class="warn">Issue observed</span>';

  const tyre = m =>
    m == null
      ? "Not checked"
      : m < 1.6
        ? `<span class="bad">${m} mm – Illegal</span>`
        : m < 3
          ? `<span class="warn">${m} mm – Low</span>`
          : `<span class="good">${m} mm – Good</span>`;

  let html = `
    <p><strong>Registration:</strong> ${d.r}</p>
    <p><strong>MOT Expiry:</strong> ${d.m || "Not recorded"}</p>

    <h3>Windscreen & Wipers</h3>
    <p>Windscreen: ${badge(d.w)}</p>
    <p>Wipers: ${badge(d.wp)}</p>

    <h3>Tyres</h3>
    <ul>
      <li>Driver Front: ${tyre(d.t.df)}</li>
      <li>Driver Rear: ${tyre(d.t.dr)}</li>
      <li>Passenger Front: ${tyre(d.t.pf)}</li>
      <li>Passenger Rear: ${tyre(d.t.pr)}</li>
    </ul>

    <h3>Lights – Driver Side</h3>
    <ul>
      <li>Front Light: ${badge(d.l.d.fl)}</li>
      <li>Rear Light: ${badge(d.l.d.rl)}</li>
      <li>Brake Light: ${badge(d.l.d.br)}</li>
      <li>Front Indicator: ${badge(d.l.d.if)}</li>
      <li>Rear Indicator: ${badge(d.l.d.ir)}</li>
      <li>Side Repeater: ${badge(d.l.d.is)}</li>
    </ul>

    <h3>Lights – Passenger Side</h3>
    <ul>
      <li>Front Light: ${badge(d.l.p.fl)}</li>
      <li>Rear Light: ${badge(d.l.p.rl)}</li>
      <li>Brake Light: ${badge(d.l.p.br)}</li>
      <li>Front Indicator: ${badge(d.l.p.if)}</li>
      <li>Rear Indicator: ${badge(d.l.p.ir)}</li>
      <li>Side Repeater: ${badge(d.l.p.is)}</li>
    </ul>
  `;

  if (d.n && d.n.trim()) {
    html += `
      <h3>Additional / Extra Lighting Observations</h3>
      <p>${d.n}</p>
    `;
  }

  document.getElementById("report").innerHTML = html;
}
</script>

</body>
</html>
